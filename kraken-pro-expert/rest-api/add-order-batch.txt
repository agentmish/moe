Spot REST APITradingAdd Order Batch
Add Order Batch
POST
https://api.kraken.com/0/private/AddOrderBatch

Sends a collection of orders (minimum of 2 and maximum 15):

Validation is performed on the whole batch prior to submission to the engine. If an order fails validation, the whole batch will be rejected.
On submission to the engine, if an order fails pre-match checks (i.e. funding), then the individual order will be rejected and remainder of the batch will be processed.
All orders in batch are limited to a single pair.

Note: See the AssetPairs endpoint for details on the available trading pairs, their price and quantity precisions, order minimums, available leverage, etc.

API Key Permissions Required: Orders and trades - Create & modify orders and Orders and trades - Cancel & close orders

Request​
APPLICATION/JSON
BODYREQUIRED
nonce
int64
REQUIRED

Nonce used in construction of API-Sign header

orders
object[]
REQUIRED
Array [
userref
int32

User reference id userref is an optional user-specified integer id that can be associated with any number of orders. Many clients choose a userref corresponding to a unique integer id generated by their systems (e.g. a timestamp). However, because we don't enforce uniqueness on our side, it can also be used to easily group orders by pair, side, strategy, etc. This allows clients to more readily cancel or query information about orders in a particular group, with fewer API calls by using userref instead of our txid, where supported.

cl_ord_id
string

Adds an alphanumeric client order identifier which uniquely identifies an open order for each client. This field is mutually exclusive with userref parameter.

The cl_ord_id parameter can be one of the following formats:

Long UUID: 6d1b345e-2821-40e2-ad83-4ecb18a06876 32 hex characters separated with 4 dashes.
Short UUID: da8e4ad59b78481c93e589746b0cf91f 32 hex characters with no dashes.
Free text: arb-20240509-00010 Free format ascii text up to 18 characters.
ordertype
string
REQUIRED

Order type

Possible values: [market, limit, iceberg, stop-loss, take-profit, stop-loss-limit, take-profit-limit, trailing-stop, trailing-stop-limit, settle-position]

type
string
REQUIRED

Order direction (buy/sell)

Possible values: [buy, sell]

volume
string
REQUIRED

Order quantity in terms of the base asset

Note: Volume can be specified as 0 for closing margin orders to automatically fill the requisite quantity.

displayvol
string

For iceberg orders only, it defines the quantity to show in the book while the rest of order quantity remains hidden. Minimum value is 1 / 15 of volume.

price
string

Price:

Limit price for limit and iceberg orders
Trigger price for stop-loss, stop-loss-limit, take-profit, and take-profit-limit orders

Notes:

Relative Prices: Either price or price2 can be preceded by +, -, or # to specify the order price as an offset relative to the last traded price. + adds the amount to, and - subtracts the amount from the last traded price. # will either add or subtract the amount to the last traded price, depending on the direction and order type used. Prices can also be suffixed with a % to signify the relative amount as a percentage, rather than an absolute price difference.
price2
string

Secondary Price:

Limit price for stop-loss-limit and take-profit-limit
trigger
string

Price signal used to trigger stop-loss, stop-loss-limit, take-profit, and take-profit-limit orders Notes:

To keep triggers serviceable, the last price will be used as fallback reference price during connectivity issues with external index feeds.

Possible values: [index, last]

Default value: last
leverage
string

Amount of leverage desired (default: none)

reduce_only
boolean

If true, order will only reduce a currently open position, not increase it or open a new position.

Default value: false
stptype
string

Self trade prevention behaviour definition:

cancel-newest - if self trade is triggered, arriving order will be canceled
cancel-oldest - if self trade is triggered, resting order will be canceled
cancel-both - if self trade is triggered, both arriving and resting orders will be canceled

Possible values: [cancel-newest, cancel-oldest, cancel-both]

Default value: cancel-newest
oflags
oflags (string)

Comma delimited list of order flags

• post post-only order (available when ordertype = limit)
• fcib prefer fee in base currency (default if selling)
• fciq prefer fee in quote currency (default if buying, mutually exclusive with fcib)
• nompp disable market price protection for market orders
• viqc order volume expressed in quote currency. This option is supported only for buy market orders. Also not available on margin orders.
Example: post
timeinforce
string

Time-in-force of the order to specify how long it should remain in the order book before being cancelled. GTC (Good-'til-cancelled) is default if the parameter is omitted. IOC (immediate-or-cancel) will immediately execute the amount possible and cancel any remaining balance rather than resting in the book. GTD (good-'til-date), if specified, must coincide with a desired expiretm.

Possible values: [GTC, IOC, GTD]

Default value: GTC
starttm
string

Scheduled start time, can be specified as an absolute timestamp or as a number of seconds in the future:

0 now (default)
+<n> schedule start time seconds from now
<n> = unix timestamp of start time
expiretm
string

Expiry time on GTD orders can be set up to one month in future, it is specified as an absolute timestamp or as a number of seconds from now:

0 no expiration (default)
+<n> = expire seconds from now, minimum 5 seconds
<n> = unix timestamp of expiration time
]
pair
string
REQUIRED

Asset pair id or altname

deadline
string

RFC3339 timestamp (e.g. 2021-04-01T00:18:45Z) after which the matching engine should reject the new order request, in presence of latency or order queueing. min now() + 2 seconds, max now() + 60 seconds.

validate
boolean

Validate inputs only. Do not submit order.

Default value: false
Responses​
200

The order of returned orders in the response array is the same as the order of the order list sent in request.

APPLICATION/JSON
Schema
Limits, one with conditional stop-loss
SCHEMA
result
object
orders
object[]
Array [
descr
object

Order description info

order
string
error
string

Error description from individual order processing

txid
string

Transaction ID for order
(if order was added successfully)

]
error
array[]
AUTHORIZATION: API-KEY
GO
NODEJS
PYTHON
NATIVE
REQUEST
COLLAPSE ALL
Base URL
https://api.kraken.com/0
Auth
API-Key
API-Sign
Body
 REQUIRED
{
  "nonce": 1695828490,
  "orders": [
    {
      "close": {
        "ordertype": "stop-loss-limit",
        "price": "37000",
        "price2": "36000"
      },
      "ordertype": "limit",
      "price": "40000",
      "price2": "string",
      "timeinforce": "GTC",
      "type": "buy",
      "cl_ord_id": "6d1b345e-2821-40e2-ad83-4ecb18a06876",
      "volume": "1.2"
    },
    {
      "ordertype": "limit",
      "price": "42000",
      "starttm": "string",
      "timeinforce": "GTC",
      "type": "sell",
      "cl_ord_id": "da8e4ad59b78481c93e589746b0cf91",
      "volume": "1.2"
    }
  ],
  "pair": "BTC/USD",
  "validate": false,
  "deadline": "2023-09-24T14:15:22Z"
}

Previous
Get Websockets Token
Next
Cancel Order Batch